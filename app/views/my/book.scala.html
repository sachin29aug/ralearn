@(book: models.Book, userBook: UserBook, sameAuthorBooks: List[Book], sameSubCategoryBooks: List[Book])

@import org.apache.commons.lang3.BooleanUtils

@layout.main("RaLearn", "book-page") {
    <div class="book">
        <a class="top-left-btn-group" onclick="event.preventDefault(); homeGet();" href="#">@_circularIcon("fas fa-arrow-left")</a>
        <div class="top-right-btn-group">
            <div class="d-flex">
                @if(userBook != null) {
                <a id="id-element-book-@book.id" class="cls-favorite-btn me-3" data-book-id="@book.id" href="#">
                    @if(BooleanUtils.isTrue(userBook.getFavorite())) {
                        @_circularIcon("fa-solid fa-heart")
                    } else {
                        @_circularIcon("fa-regular fa-heart")
                    }
                </a>
                }
                <a class="cls-share-btn" data-share-url="@routes.My.book(book.id)" data-share-title="@book.getTitle(50)" href="#">@_circularIcon("fa-solid fa-arrow-up-from-bracket")</a>
            </div>
        </div>

        <div class="book--cover-section">
            <div class="text-center"><img class="book--cover-section-image" src="@book.getGbBook().getThumbnailUrl()"></div>
        </div>
        <div class="book--details mb-4">
            <h4 class="book--details-title">@book.getTitle()</h4>
            <div class="book--details-author mb-2">@book.getAuthor()</div>

            <div class="d-flex flex-wrap gap-2 mb-4">
                <div class="rating-pill">@book.getRatingCategoryText</div>
                @for(bookCategory <- book.getBookCategories()) {
                    @_categoryPillSmall(bookCategory.getCategory())
                }
            </div>

            <hr>
            <div class="d-flex align-items-center mb-1">
                <i class="fas fa-lightbulb me-3"></i>
                <div class="fw-bold">Mastering Focus in a Distracted World</div>
            </div>
            <div class="fst-italic">A practical guide to achieving high levels of productivity by cultivating deep focus and eliminating distractions.</div>
            <div class="accordion accordion-flush" id="accordionFlushExample">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <a class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#flush-1" href="">More Insights</a>
                    </h2>
                    <div id="flush-1" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body ms-3 py-0">
                            Key Themes and Takeaways:
                            <ul>
                                <li>Rapid cognition is often accurate and valuable.</li>
                                <li>Intuition plays a crucial role in decision-making.</li>
                                <li>Overthinking can sometimes hinder effective judgment.</li>
                            </ul>

                            Target Audience:
                            <ul>
                                <li>Psychology enthusiasts.</li>
                                <li>Professionals interested in decision-making strategies.</li>
                                <li>Readers curious about human behavior and intuition.</li>
                            </ul>

                            Mood and Style: Engaging, thought-provoking, and analytical, with a blend of storytelling and scientific insight.

                            Actionable Ideas:
                            <ul>
                                <li>Practice observing and analyzing your intuitive responses in daily decisions.</li>
                                <li>Identify patterns in successful snap judgments and learn from them.</li>
                                <li>Balance instinctive thinking with deliberate reasoning for better outcomes.</li>
                            </ul>

                            Bookâ€™s Unique Selling Proposition (USP): Blink redefines the way we think about thinking, showing how intuition can be a powerful tool when understood and harnessed effectively.
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            @_spacer(4)
        </div>

        <div class="book--tabs mb-4">
            <ul class="nav nav-pills bg-white rounded-pill p-2">
                <li class="nav-item text-center w-50">
                    <a class="nav-link rounded-pill text-decoration-none active" data-bs-toggle="tab" href="#book">Overview</a>
                </li>
                <li class="nav-item text-center w-50">
                    <a class="nav-link rounded-pill text-decoration-none" data-bs-toggle="tab" href="#author">Author</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane container active show" id="book">
                    <p>@Html(book.getHtmlDescription())</p>
                    @**
                    <p>Deep Work" is Cal Newport's manifesto for achieving success in a world filled with distractions. Newport argues that the ability to focus deeply on cognitively demanding tasks is a rare and valuable skill in the modern workplace.</p>
                    <p>Through practical strategies, case studies, and scientific insights, he explains how to create environments conducive to deep work and avoid the pitfalls of shallow work. This book is an essential tool for anyone striving for excellence and meaningful accomplishments.</p>
                    **@

                    <div class="mb-4">
                        <h4 class="fw-600 mb-3">Notable Quotes</h4>
                        @_quote()
                        @_quote()
                    </div>

                    @if(userBook != null && userBook.getUser() != null) {
                        @_rateBook(userBook.getUser().getId(), book.getId())
                    }

                    @_spacer(4)

                    <h4 class="fw-600 mb-3">Related Books</h4>
                    <div class="scrollable-cards-x">
                        @for(book <- sameSubCategoryBooks) {
                        <div class="scrollable-card-x">
                            @_card3(book, false)
                        </div>
                        }
                    </div>
                </div>
                <div class="tab-pane container fade" id="author">
                    <h4 class="fw-600 mb-3">About the Author</h4>
                    <p>Cal Newport is a computer science professor and writer known for his expertise in productivity and digital minimalism.</p>

                    <div class="mb-4">
                        <h4 class="fw-600 mb-3">Quotes by @book.getAuthor()</h4>
                        @_quote()
                        @_quote()
                    </div>

                    @_spacer(5)
                    <h4 class="fw-600 mb-3">Other works by @book.getAuthor()</h4>
                    <div class="scrollable-cards-x">
                        @for(book <- sameAuthorBooks) {
                        <div class="scrollable-card-x">
                            @_card3(book, false)
                        </div>
                        }
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center">
            <a class="cls-more-options-modal-btn btn btn-primary mb-4" data-good-reads-url="@book.getGrAbsoluteUrl()" data-amazon-url="@book.getAmazonUrl()" data-google-books-preview-url="@book.getGbBook().getPreviewLink()" data-youtube-url="@book.getYoutubeUrl()" href="#">More Options</a>
        </div>
    </div>

    @layout._footerNavBar("home-tab")
}